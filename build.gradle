

buildscript {
    repositories {
        mavenCentral()
    }
}

plugins {
    id 'pl.allegro.tech.build.axion-release' version '1.3.4'	
}

scmVersion {

	tag {
	    prefix = 'babba'
	}

    repository {
        customKey = project.file(System.getProperty('user.home')+ '/.ssh/id_rsa')
    }

    hooks {
        pre 'fileUpdate', [file: 'src/main/resources/app.props', pattern: {v,p -> /(app.version=).*/}, replacement: {v, p -> "\$1$v"}]
        pre 'commit'

        post 'fileUpdate', [file: 'src/main/resources/app.props', pattern: {v,p -> /(app.version=).*/}, replacement: {v, p -> "\$1$v-SNAPSHOT"}]
        post 'commit'
    }    
}

project.version = scmVersion.version

apply plugin: 'java'